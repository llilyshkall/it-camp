<!doctype html>
<html lang="ru" data-theme="">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <meta name="theme-color" content="#0a73b7" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="default" />
  <meta name="apple-mobile-web-app-title" content="–ì–∞–∑–ø—Ä–æ–º –î–∞—à–±–æ—Ä–¥—ã" />
  <meta name="mobile-web-app-capable" content="yes" />
  <meta name="format-detection" content="telephone=no" />
  <title>–î–∞—à–±–æ—Ä–¥—ã –ø–æ –ø—Ä–æ–µ–∫—Ç–∞–º</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='mobile-specific.css') }}">
</head>
<body>
<a class="skip-link" href="#main">–ö —Å–æ–¥–µ—Ä–∂–∞–Ω–∏—é</a>

<header>
  <div class="header-top">
    <div class="container">
      <div class="brand">–ö–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—ã–π –ø—Ä–æ–µ–∫—Ç</div>
      <nav class="meta-nav" aria-label="–°–ª—É–∂–µ–±–Ω–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è">
        <button id="theme-toggle" class="icon-btn" title="–ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å —Ç–µ–º—É" aria-label="–ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å —Ç–µ–º—É">üåô</button>
        <a href="/">–ì–ª–∞–≤–Ω–∞—è</a>
        <a href="/" lang="ru">RU</a>
      </nav>
    </div>
  </div>

  <div class="main-nav-wrapper">
    <div class="container header-row">
      <!-- –ö–Ω–æ–ø–∫–∞ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ —Å–ª–µ–≤–∞ -->
      <div class="left-nav">
        <button class="nav-toggle btn btn-ghost" id="nav-toggle" aria-haspopup="true" aria-expanded="false" title="–û—Ç–∫—Ä—ã—Ç—å –Ω–∞–≤–∏–≥–∞—Ü–∏—é" aria-label="–û—Ç–∫—Ä—ã—Ç—å –º–µ–Ω—é –Ω–∞–≤–∏–≥–∞—Ü–∏–∏">
          <span class="nav-toggle-icon" aria-hidden="true">‚ò∞</span>
        </button>
        <!-- –í—Å–ø–ª—ã–≤–∞—é—â–∏–π —Å–ø–∏—Å–æ–∫ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ -->
        <div class="nav-dropdown" id="nav-dropdown" hidden>
          <ul class="nav-menu" id="nav-menu" role="menu">
            <!-- –û—Å–Ω–æ–≤–Ω—ã–µ —Ä–∞–±–æ—á–∏–µ –≤–∫–ª–∞–¥–∫–∏ -->
            <li class="nav-menu-item active">
              <a href="/" class="nav-menu-link">
                <span class="nav-menu-text">–ì–ª–∞–≤–Ω–∞—è</span>
              </a>
            </li>
            <li class="nav-menu-item active">
              <a href="/#assurance-card" class="nav-menu-link">
                <span class="nav-menu-text">–û–±—Ä–∞–±–æ—Ç–∫–∞ –∞—à—É—Ä–µ–Ω—Å–∞</span>
              </a>
            </li>
            <li class="nav-menu-item active">
              <a href="/dashboards" class="nav-menu-link" aria-current="page">
                <span class="nav-menu-text">–î–∞—à–±–æ—Ä–¥—ã –ø–æ –ø—Ä–æ–µ–∫—Ç–∞–º</span>
              </a>
            </li>
            <li class="nav-menu-item inactive">
              <a href="#" class="nav-menu-link" onclick="return false;">
                <span class="nav-menu-text">–ê–Ω–∞–ª–∏—Ç–∏–∫–∞ (—Å–∫–æ—Ä–æ)</span>
              </a>
            </li>
            
            <!-- –†–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å -->
            <li class="nav-menu-separator"></li>
            
            <!-- –°–∏—Å—Ç–µ–º–Ω—ã–µ –≤–∫–ª–∞–¥–∫–∏ (–Ω–µ–∞–∫—Ç–∏–≤–Ω—ã–µ) -->
            <li class="nav-menu-item system">
              <a href="#" class="nav-menu-link" onclick="return false;">
                <span class="nav-menu-text">–ù–æ–≤–æ—Å—Ç–∏</span>
              </a>
            </li>
            <li class="nav-menu-item system">
              <a href="#" class="nav-menu-link" onclick="return false;">
                <span class="nav-menu-text">–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –ø–æ–ª–∏—Ç–∏–∫–∞</span>
              </a>
            </li>
            <li class="nav-menu-item system">
              <a href="#" class="nav-menu-link" onclick="return false;">
                <span class="nav-menu-text">–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –∞—à—É—Ä–∞–Ω—Å—ã</span>
              </a>
            </li>
            <li class="nav-menu-item system">
              <a href="#" class="nav-menu-link" onclick="return false;">
                <span class="nav-menu-text">–ö–∞–ª–µ–Ω–¥–∞—Ä—å</span>
              </a>
            </li>
            <li class="nav-menu-item system">
              <a href="#" class="nav-menu-link" onclick="return false;">
                <span class="nav-menu-text">–ü—Ä–æ–µ–∫—Ç—ã</span>
              </a>
            </li>
            <li class="nav-menu-item system">
              <a href="#" class="nav-menu-link" onclick="return false;">
                <span class="nav-menu-text">–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏</span>
              </a>
            </li>
            <li class="nav-menu-item system">
              <a href="#" class="nav-menu-link" onclick="return false;">
                <span class="nav-menu-text">–ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ –∑–Ω–∞–Ω–∏–π</span>
              </a>
            </li>
            <li class="nav-menu-item system">
              <a href="#" class="nav-menu-link" onclick="return false;">
                <span class="nav-menu-text">–í–æ–ø—Ä–æ—Å —ç–∫—Å–ø–µ—Ä—Ç—É</span>
              </a>
            </li>
            <li class="nav-menu-item system">
              <a href="#" class="nav-menu-link" onclick="return false;">
                <span class="nav-menu-text">–ò–∑–≤–ª–µ—á–µ–Ω–Ω—ã–µ —É—Ä–æ–∫–∏</span>
              </a>
            </li>
            <li class="nav-menu-item system">
              <a href="#" class="nav-menu-link" onclick="return false;">
                <span class="nav-menu-text">–¢–µ—Ä–º–∏–Ω—ã</span>
              </a>
            </li>
            <li class="nav-menu-item system">
              <a href="#" class="nav-menu-link" onclick="return false;">
                <span class="nav-menu-text">–§—É–Ω–∫—Ü–∏–∏</span>
              </a>
            </li>
            <li class="nav-menu-item system">
              <a href="#" class="nav-menu-link" onclick="return false;">
                <span class="nav-menu-text">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏</span>
              </a>
            </li>
            <li class="nav-menu-item system">
              <a href="#" class="nav-menu-link" onclick="return false;">
                <span class="nav-menu-text">–ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏</span>
              </a>
            </li>
          </ul>
        </div>
      </div>

      <div class="wordmark"><a class="wordmark-link" href="/">–ü–†–û–ï–ö–¢ –î–õ–Ø –ì–ê–ó–ü–†–û–ú–ê</a></div>
    </div>
  </div>
</header>

<main id="main">
  <span id="top" class="anchor-offset" aria-hidden="true"></span>

  <!-- HERO -->
  <section class="hero">
    <div class="container">
      <h1>–î–∞—à–±–æ—Ä–¥—ã –ø–æ –ø—Ä–æ–µ–∫—Ç–∞–º</h1>
      <p class="lead">–ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≤—Å–µ—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤ –≤ –µ–¥–∏–Ω–æ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ</p>
    </div>
  </section>

  <!-- –î–∞—à–±–æ—Ä–¥—ã -->
  <section class="section">
    <div class="container">
      <div class="stack">
        
        <!-- –§–∏–ª—å—Ç—Ä—ã –∏ –ø–æ–∏—Å–∫ -->
        <div class="card">
          <div class="card-head">
            <div class="card-icon" aria-hidden="true">üîç</div>
            <h3>–§–∏–ª—å—Ç—Ä—ã –∏ –ø–æ–∏—Å–∫</h3>
          </div>
          <div class="filters-form">
            <div class="filters-row">
              <div class="filter-group">
                <label class="filter-label" for="status-filter-toggle">–°—Ç–∞—Ç—É—Å –ø—Ä–æ–µ–∫—Ç–∞</label>
                <div class="custom-select" id="status-filter-wrapper">
                  <button class="custom-select-toggle" id="status-filter-toggle" type="button" aria-haspopup="listbox" aria-expanded="false">
                    <span class="custom-select-text">–í—Å–µ —Å—Ç–∞—Ç—É—Å—ã</span>
                    <span class="custom-select-arrow" aria-hidden="true">‚ñº</span>
                  </button>
                  <ul class="custom-select-menu" id="status-filter-menu" hidden role="listbox">
                    <li class="custom-select-option" data-value="" role="option" aria-selected="true">–í—Å–µ —Å—Ç–∞—Ç—É—Å—ã</li>
                    <li class="custom-select-option" data-value="active" role="option">–í —Ä–∞–±–æ—Ç–µ</li>
                    <li class="custom-select-option" data-value="paused" role="option">–ù–∞ –ø–∞—É–∑–µ</li>
                    <li class="custom-select-option" data-value="completed" role="option">–ó–∞–≤–µ—Ä—à—ë–Ω</li>
                  </ul>
                </div>
              </div>
              <div class="filter-group">
                <label class="filter-label" for="budget-filter-toggle">–ë—é–¥–∂–µ—Ç</label>
                <div class="custom-select" id="budget-filter-wrapper">
                  <button class="custom-select-toggle" id="budget-filter-toggle" type="button" aria-haspopup="listbox" aria-expanded="false">
                    <span class="custom-select-text">–õ—é–±–æ–π –±—é–¥–∂–µ—Ç</span>
                    <span class="custom-select-arrow" aria-hidden="true">‚ñº</span>
                  </button>
                  <ul class="custom-select-menu" id="budget-filter-menu" hidden role="listbox">
                    <li class="custom-select-option" data-value="" role="option" aria-selected="true">–õ—é–±–æ–π –±—é–¥–∂–µ—Ç</li>
                    <li class="custom-select-option" data-value="small" role="option">–î–æ 200K</li>
                    <li class="custom-select-option" data-value="medium" role="option">200K - 500K</li>
                    <li class="custom-select-option" data-value="large" role="option">–ë–æ–ª–µ–µ 500K</li>
                  </ul>
                </div>
              </div>
              <div class="filter-group">
                <label class="filter-label" for="search-filter">–ü–æ–∏—Å–∫</label>
                <input type="text" class="filter-input" id="search-filter" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞..." aria-label="–ü–æ–∏—Å–∫ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é –ø—Ä–æ–µ–∫—Ç–∞">
              </div>
            </div>
            <div class="filters-actions">
              <button class="btn btn-primary" id="apply-filters">
                <span class="btn-icon" aria-hidden="true">‚úÖ</span>
                –ü—Ä–∏–º–µ–Ω–∏—Ç—å
              </button>
              <button class="btn btn-outline" id="reset-filters">
                <span class="btn-icon" aria-hidden="true">üîÑ</span>
                –°–±—Ä–æ—Å–∏—Ç—å
              </button>
            </div>
          </div>
        </div>

        <!-- –û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ -->
        <div class="card card-lg">
          <div class="card-head">
            <div class="card-icon" aria-hidden="true">üìà</div>
            <h3>–û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h3>
          </div>
          <div class="stats-grid">
            <div class="stat-item">
              <div class="stat-number" aria-label="12 –∞–∫—Ç–∏–≤–Ω—ã—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤">12</div>
              <div class="stat-label">–ê–∫—Ç–∏–≤–Ω—ã—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤</div>
            </div>
            <div class="stat-item">
              <div class="stat-number" aria-label="8 –∑–∞–≤–µ—Ä—à—ë–Ω–Ω—ã—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤">8</div>
              <div class="stat-label">–ó–∞–≤–µ—Ä—à—ë–Ω–Ω—ã—Ö</div>
            </div>
            <div class="stat-item">
              <div class="stat-number" aria-label="95 –ø—Ä–æ—Ü–µ–Ω—Ç–æ–≤ —É—Å–ø–µ—à–Ω–æ—Å—Ç–∏">95%</div>
              <div class="stat-label">–£—Å–ø–µ—à–Ω–æ—Å—Ç—å</div>
            </div>
            <div class="stat-item">
              <div class="stat-number" aria-label="2.4 –º–∏–ª–ª–∏–æ–Ω–∞ —Ä—É–±–ª–µ–π –æ–±—â–∏–π –±—é–¥–∂–µ—Ç">‚ÇΩ2.4M</div>
              <div class="stat-label">–û–±—â–∏–π –±—é–¥–∂–µ—Ç</div>
            </div>
          </div>
        </div>

        <!-- –ì—Ä–∞—Ñ–∏–∫ –ø—Ä–æ–µ–∫—Ç–æ–≤ -->
        <div class="card card-lg">
          <div class="card-head">
            <div class="card-icon" aria-hidden="true">üìä</div>
            <h3>–°—Ç–∞—Ç—É—Å –ø—Ä–æ–µ–∫—Ç–æ–≤</h3>
          </div>
          <div class="chart-container">
            <div class="chart-placeholder">
              <div class="chart-text">–ì—Ä–∞—Ñ–∏–∫ —Å—Ç–∞—Ç—É—Å–æ–≤ –ø—Ä–æ–µ–∫—Ç–æ–≤</div>
              <div class="chart-legend">
                <div class="legend-item">
                  <span class="legend-color" style="background: #10b981;" aria-label="–¶–≤–µ—Ç –¥–ª—è –ø—Ä–æ–µ–∫—Ç–æ–≤ –≤ —Ä–∞–±–æ—Ç–µ"></span>
                  <span>–í —Ä–∞–±–æ—Ç–µ</span>
                </div>
                <div class="legend-item">
                  <span class="legend-color" style="background: #f59e0b;" aria-label="–¶–≤–µ—Ç –¥–ª—è –ø—Ä–æ–µ–∫—Ç–æ–≤ –Ω–∞ –ø–∞—É–∑–µ"></span>
                  <span>–ù–∞ –ø–∞—É–∑–µ</span>
                </div>
                <div class="legend-item">
                  <span class="legend-color" style="background: #3b82f6;" aria-label="–¶–≤–µ—Ç –¥–ª—è –∑–∞–≤–µ—Ä—à—ë–Ω–Ω—ã—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤"></span>
                  <span>–ó–∞–≤–µ—Ä—à—ë–Ω</span>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- –°–ø–∏—Å–æ–∫ –ø—Ä–æ–µ–∫—Ç–æ–≤ -->
        <div class="card card-lg">
          <div class="card-head">
            <div class="card-icon" aria-hidden="true">üìã</div>
            <h3>–°–ø–∏—Å–æ–∫ –ø—Ä–æ–µ–∫—Ç–æ–≤</h3>
          </div>
          <div class="projects-table" role="table" aria-label="–°–ø–∏—Å–æ–∫ –ø—Ä–æ–µ–∫—Ç–æ–≤">
            <div class="table-header" role="row">
              <div class="table-cell" role="columnheader">–ù–∞–∑–≤–∞–Ω–∏–µ</div>
              <div class="table-cell" role="columnheader">–°—Ç–∞—Ç—É—Å</div>
              <div class="table-cell" role="columnheader">–ü—Ä–æ–≥—Ä–µ—Å—Å</div>
              <div class="table-cell" role="columnheader">–ë—é–¥–∂–µ—Ç</div>
              <div class="table-cell" role="columnheader">–î–µ–¥–ª–∞–π–Ω</div>
            </div>
            <div class="table-row" data-status="active" data-budget="large" role="row">
              <div class="table-cell" role="cell">–Ø–≥–æ–¥–Ω–æ–µ</div>
              <div class="table-cell" role="cell"><span class="status-badge status-active">–í —Ä–∞–±–æ—Ç–µ</span></div>
              <div class="table-cell" role="cell">
                <div class="progress-bar" aria-label="–ü—Ä–æ–≥—Ä–µ—Å—Å: 75 –ø—Ä–æ—Ü–µ–Ω—Ç–æ–≤">
                  <div class="progress-fill" style="width: 75%"></div>
                </div>
                <span class="progress-text">75%</span>
              </div>
              <div class="table-cell" role="cell">‚ÇΩ450K</div>
              <div class="table-cell" role="cell">15.12.2024</div>
            </div>
            <div class="table-row" data-status="paused" data-budget="medium" role="row">
              <div class="table-cell" role="cell">–ë—Ä—É—Å–Ω–∏—á–Ω–æ–µ</div>
              <div class="table-cell" role="cell"><span class="status-badge status-paused">–ù–∞ –ø–∞—É–∑–µ</span></div>
              <div class="table-cell" role="cell">
                <div class="progress-bar" aria-label="–ü—Ä–æ–≥—Ä–µ—Å—Å: 45 –ø—Ä–æ—Ü–µ–Ω—Ç–æ–≤">
                  <div class="progress-fill" style="width: 45%"></div>
                </div>
                <span class="progress-text">45%</span>
              </div>
              <div class="table-cell" role="cell">‚ÇΩ320K</div>
              <div class="table-cell" role="cell">20.01.2025</div>
            </div>
            <div class="table-row" data-status="completed" data-budget="medium" role="row">
              <div class="table-cell" role="cell">–ú–∞–ª–∏–Ω–æ–≤–æ–µ</div>
              <div class="table-cell" role="cell"><span class="status-badge status-completed">–ó–∞–≤–µ—Ä—à—ë–Ω</span></div>
              <div class="table-cell" role="cell">
                <div class="progress-bar" aria-label="–ü—Ä–æ–≥—Ä–µ—Å—Å: 100 –ø—Ä–æ—Ü–µ–Ω—Ç–æ–≤">
                  <div class="progress-fill" style="width: 100%"></div>
                </div>
                <span class="progress-text">100%</span>
              </div>
              <div class="table-cell" role="cell">‚ÇΩ280K</div>
              <div class="table-cell" role="cell">01.11.2024</div>
            </div>
          </div>
        </div>

      </div>
    </div>
  </section>
</main>

<footer class="footer">
  <div class="container">
    <div>
      <div class="wordmark-sm">–ü—Ä–æ–µ–∫—Ç –¥–ª—è –ì–∞–∑–ø—Ä–æ–º–∞</div>
      <small>–î–µ–º–æ-—Å—Ç–∏–ª—å –±–µ–∑ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–π —Å–∏–º–≤–æ–ª–∏–∫–∏.</small>
    </div>
    <nav class="footer-nav" aria-label="–í—Ç–æ—Ä–∏—á–Ω–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è">
      <a href="/">–ì–ª–∞–≤–Ω–∞—è</a>
      <a href="/">–ü–æ–ª–∏—Ç–∏–∫–∞</a>
      <a href="/">–£—Å–ª–æ–≤–∏—è</a>
    </nav>
  </div>
</footer>

<!-- Toast -->
<div id="toast" class="toast" role="status" aria-live="polite" aria-atomic="true" hidden>
  <div id="toast-msg"></div>
</div>

<!-- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –º–æ–±–∏–ª—å–Ω—ã—Ö —É–ª—É—á—à–µ–Ω–∏–π -->
<script src="{{ url_for('static', filename='mobile-enhancements.js') }}"></script>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    // ===== –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å —Ç–µ–º—ã =====
    (function(){
      const root = document.documentElement;
      const btn = document.getElementById('theme-toggle');
      const apply = (mode) => {
        if (!mode) { root.removeAttribute('data-theme'); btn.textContent='üåô'; return; }
        root.setAttribute('data-theme', mode);
        btn.textContent = mode === 'light' ? 'üåû' : 'üåô';
      };
      const saved = localStorage.getItem('theme');
      apply(saved);
      btn.addEventListener('click', () => {
        const current = root.getAttribute('data-theme');
        let next;
        if (!current) next = 'light';
        else if (current === 'light') next = 'dark';
        else next = null;
        if (next) localStorage.setItem('theme', next); else localStorage.removeItem('theme');
        apply(next);
      });
    })();

    // ===== –õ–µ–≤–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è =====
    (function(){
      const navToggle = document.getElementById('nav-toggle');
      const navDropdown = document.getElementById('nav-dropdown');
      const navMenu = document.getElementById('nav-menu');

      function openNavMenu() {
        navDropdown.hidden = false;
        navToggle.setAttribute('aria-expanded', 'true');
        
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º –∏ –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä—É–µ–º –ø–æ–∑–∏—Ü–∏—é –º–µ–Ω—é
        adjustMenuPosition();
        
        // –î–æ–±–∞–≤–ª—è–µ–º –∫–ª–∞—Å—Å –¥–ª—è –∞–Ω–∏–º–∞—Ü–∏–∏
        requestAnimationFrame(() => {
          navDropdown.classList.add('open');
        });
        
        setTimeout(() => {
          const firstLink = navMenu.querySelector('.nav-menu-link');
          if (firstLink) firstLink.focus();
        }, 100);
      }

      function adjustMenuPosition() {
        const rect = navDropdown.getBoundingClientRect();
        const viewportWidth = window.innerWidth;
        
        // –ï—Å–ª–∏ –º–µ–Ω—é –≤—ã—Ö–æ–¥–∏—Ç –∑–∞ –ª–µ–≤—ã–π –∫—Ä–∞–π —ç–∫—Ä–∞–Ω–∞
        if (rect.left < 0) {
          navDropdown.style.right = 'auto';
          navDropdown.style.left = '0';
          navDropdown.style.transformOrigin = 'top left';
        } else {
          navDropdown.style.right = '0';
          navDropdown.style.left = 'auto';
          navDropdown.style.transformOrigin = 'top right';
        }
        
        // –ï—Å–ª–∏ –º–µ–Ω—é —Å–ª–∏—à–∫–æ–º —à–∏—Ä–æ–∫–æ–µ –¥–ª—è —ç–∫—Ä–∞–Ω–∞
        if (rect.width > viewportWidth - 24) {
          navDropdown.style.width = 'calc(100vw - 24px)';
          navDropdown.style.maxWidth = 'calc(100vw - 24px)';
        }
      }

      function closeNavMenu() {
        navDropdown.classList.remove('open');
        navToggle.setAttribute('aria-expanded', 'false');
        
        // –ñ–¥–µ–º –æ–∫–æ–Ω—á–∞–Ω–∏—è –∞–Ω–∏–º–∞—Ü–∏–∏ –ø–µ—Ä–µ–¥ —Å–∫—Ä—ã—Ç–∏–µ–º
        setTimeout(() => {
          navDropdown.hidden = true;
        }, 300);
        
        navToggle.focus();
      }

      navToggle.addEventListener('click', (e) => {
        e.preventDefault();
        if (navDropdown.hidden) {
          openNavMenu();
        } else {
          closeNavMenu();
        }
      });

      // –£–ª—É—á—à–µ–Ω–Ω–æ–µ –∑–∞–∫—Ä—ã—Ç–∏–µ –ø—Ä–∏ –∫–ª–∏–∫–µ –≤–Ω–µ –º–µ–Ω—é
      document.addEventListener('click', (e) => {
        if (!navToggle.contains(e.target) && !navDropdown.contains(e.target)) {
          closeNavMenu();
        }
      });

      // –ó–∞–∫—Ä—ã—Ç–∏–µ –ø–æ Escape
      document.addEventListener('keydown', (e) => {
        if (e.key === 'Escape' && !navDropdown.hidden) {
          closeNavMenu();
        }
      });

      // –ó–∞–∫—Ä—ã—Ç–∏–µ –ø—Ä–∏ —Å–∫—Ä–æ–ª–ª–µ
      let scrollTimeout;
      document.addEventListener('scroll', () => {
        if (!navDropdown.hidden) {
          clearTimeout(scrollTimeout);
          scrollTimeout = setTimeout(() => {
            closeNavMenu();
          }, 100);
        }
      }, { passive: true });

      // –ó–∞–∫—Ä—ã—Ç–∏–µ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Ä–∞–∑–º–µ—Ä–∞ –æ–∫–Ω–∞
      window.addEventListener('resize', () => {
        if (!navDropdown.hidden) {
          closeNavMenu();
        } else {
          // –ï—Å–ª–∏ –º–µ–Ω—é –∑–∞–∫—Ä—ã—Ç–æ, –≤—Å–µ —Ä–∞–≤–Ω–æ –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä—É–µ–º –ø–æ–∑–∏—Ü–∏—é –¥–ª—è —Å–ª–µ–¥—É—é—â–µ–≥–æ –æ—Ç–∫—Ä—ã—Ç–∏—è
          adjustMenuPosition();
        }
      });
    })();

    // ===== –°–∂–∞—Ç–∏–µ —à–∞–ø–∫–∏ =====
    document.addEventListener('scroll',()=>{
      const w=document.querySelector('.main-nav-wrapper'); 
      if(w) w.classList.toggle('compact',window.scrollY>16);
    },{passive:true});

    // ===== –¢–æ—Å—Ç =====
    function toast(msg, ok=true){
      const el=document.getElementById('toast'); 
      const text=document.getElementById('toast-msg');
      text.textContent=msg; 
      el.classList.toggle('bad', !ok); 
      el.hidden=false; 
      el.classList.add('show');
      setTimeout(()=>el.classList.remove('show'), 2400);
    }

    // ===== –§–∏–ª—å—Ç—Ä—ã =====
    const statusFilterWrapper = document.getElementById('status-filter-wrapper');
    const statusFilterToggle = document.getElementById('status-filter-toggle');
    const statusFilterMenu = document.getElementById('status-filter-menu');
    const statusFilterText = statusFilterToggle.querySelector('.custom-select-text');
    
    const budgetFilterWrapper = document.getElementById('budget-filter-wrapper');
    const budgetFilterToggle = document.getElementById('budget-filter-toggle');
    const budgetFilterMenu = document.getElementById('budget-filter-menu');
    const budgetFilterText = budgetFilterToggle.querySelector('.custom-select-text');
    
    const searchFilter = document.getElementById('search-filter');
    const applyFiltersBtn = document.getElementById('apply-filters');
    const resetFiltersBtn = document.getElementById('reset-filters');
    const projectRows = document.querySelectorAll('.table-row');
    
    let statusFilterValue = '';
    let budgetFilterValue = '';

    // –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å dropdown'–∞–º–∏
    function toggleDropdown(wrapper, menu) {
      const isOpen = wrapper.classList.contains('open');
      
      // –ó–∞–∫—Ä—ã–≤–∞–µ–º –≤—Å–µ dropdown'—ã
      document.querySelectorAll('.custom-select').forEach(select => {
        select.classList.remove('open');
        select.querySelector('.custom-select-menu').hidden = true;
      });
      
      // –û—Ç–∫—Ä—ã–≤–∞–µ–º —Ç–µ–∫—É—â–∏–π, –µ—Å–ª–∏ –æ–Ω –±—ã–ª –∑–∞–∫—Ä—ã—Ç
      if (!isOpen) {
        wrapper.classList.add('open');
        menu.hidden = false;
      }
    }

    function selectOption(wrapper, menu, textElement, value, text) {
      textElement.textContent = text;
      if (wrapper === statusFilterWrapper) {
        statusFilterValue = value;
      } else if (wrapper === budgetFilterWrapper) {
        budgetFilterValue = value;
      }
      
      // –£–±–∏—Ä–∞–µ–º –≤—ã–¥–µ–ª–µ–Ω–∏–µ —Å–æ –≤—Å–µ—Ö –æ–ø—Ü–∏–π
      menu.querySelectorAll('.custom-select-option').forEach(option => {
        option.classList.remove('selected');
      });
      
      // –í—ã–¥–µ–ª—è–µ–º –≤—ã–±—Ä–∞–Ω–Ω—É—é –æ–ø—Ü–∏—é
      const selectedOption = menu.querySelector(`[data-value="${value}"]`);
      if (selectedOption) {
        selectedOption.classList.add('selected');
      }
      
      // –ó–∞–∫—Ä—ã–≤–∞–µ–º dropdown
      wrapper.classList.remove('open');
      menu.hidden = true;
    }

    // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π –¥–ª—è dropdown'–æ–≤
    statusFilterToggle.addEventListener('click', () => {
      toggleDropdown(statusFilterWrapper, statusFilterMenu);
    });

    budgetFilterToggle.addEventListener('click', () => {
      toggleDropdown(budgetFilterWrapper, budgetFilterMenu);
    });

    // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è –æ–ø—Ü–∏–π
    statusFilterMenu.addEventListener('click', (e) => {
      const option = e.target.closest('.custom-select-option');
      if (option) {
        const value = option.getAttribute('data-value');
        const text = option.textContent;
        selectOption(statusFilterWrapper, statusFilterMenu, statusFilterText, value, text);
      }
    });

    budgetFilterMenu.addEventListener('click', (e) => {
      const option = e.target.closest('.custom-select-option');
      if (option) {
        const value = option.getAttribute('data-value');
        const text = option.textContent;
        selectOption(budgetFilterWrapper, budgetFilterMenu, budgetFilterText, value, text);
      }
    });

    // –ó–∞–∫—Ä—ã—Ç–∏–µ dropdown'–æ–≤ –ø—Ä–∏ –∫–ª–∏–∫–µ –≤–Ω–µ –∏—Ö
    document.addEventListener('click', (e) => {
      if (!e.target.closest('.custom-select')) {
        document.querySelectorAll('.custom-select').forEach(select => {
          select.classList.remove('open');
          select.querySelector('.custom-select-menu').hidden = true;
        });
      }
    });

    function applyFilters() {
      const status = statusFilterValue;
      const budget = budgetFilterValue;
      const search = searchFilter.value.toLowerCase().trim();

      projectRows.forEach(row => {
        const rowStatus = row.getAttribute('data-status');
        const rowBudget = row.getAttribute('data-budget');
        const projectName = row.querySelector('.table-cell:first-child').textContent.toLowerCase();

        let showRow = true;

        // –§–∏–ª—å—Ç—Ä –ø–æ —Å—Ç–∞—Ç—É—Å—É
        if (status && rowStatus !== status) {
          showRow = false;
        }

        // –§–∏–ª—å—Ç—Ä –ø–æ –±—é–¥–∂–µ—Ç—É
        if (budget && rowBudget !== budget) {
          showRow = false;
        }

        // –§–∏–ª—å—Ç—Ä –ø–æ –ø–æ–∏—Å–∫—É
        if (search && !projectName.includes(search)) {
          showRow = false;
        }

        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º/—Å–∫—Ä—ã–≤–∞–µ–º —Å—Ç—Ä–æ–∫—É
        if (showRow) {
          row.style.display = 'grid';
          row.style.opacity = '1';
        } else {
          row.style.display = 'none';
          row.style.opacity = '0';
        }
      });

      // –û–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
      updateStats();
      toast('–§–∏–ª—å—Ç—Ä—ã –ø—Ä–∏–º–µ–Ω–µ–Ω—ã');
    }

    function resetFilters() {
      statusFilterValue = '';
      budgetFilterValue = '';
      statusFilterText.textContent = '–í—Å–µ —Å—Ç–∞—Ç—É—Å—ã';
      budgetFilterText.textContent = '–õ—é–±–æ–π –±—é–¥–∂–µ—Ç';
      searchFilter.value = '';

      // –£–±–∏—Ä–∞–µ–º –≤—ã–¥–µ–ª–µ–Ω–∏–µ —Å–æ –≤—Å–µ—Ö –æ–ø—Ü–∏–π
      document.querySelectorAll('.custom-select-option').forEach(option => {
        option.classList.remove('selected');
      });

      // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –≤—Å–µ —Å—Ç—Ä–æ–∫–∏
      projectRows.forEach(row => {
        row.style.display = 'grid';
        row.style.opacity = '1';
      });

      // –û–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
      updateStats();
      toast('–§–∏–ª—å—Ç—Ä—ã —Å–±—Ä–æ—à–µ–Ω—ã');
    }

    function updateStats() {
      const visibleRows = Array.from(projectRows).filter(row => 
        row.style.display !== 'none'
      );

      const activeProjects = visibleRows.filter(row => 
        row.getAttribute('data-status') === 'active'
      ).length;

      const completedProjects = visibleRows.filter(row => 
        row.getAttribute('data-status') === 'completed'
      ).length;

      const totalProjects = visibleRows.length;
      const successRate = totalProjects > 0 ? Math.round((completedProjects / totalProjects) * 100) : 0;

      // –û–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
      const statsNumbers = document.querySelectorAll('.stat-number');
      if (statsNumbers[0]) statsNumbers[0].textContent = activeProjects;
      if (statsNumbers[1]) statsNumbers[1].textContent = completedProjects;
      if (statsNumbers[2]) statsNumbers[2].textContent = successRate + '%';
    }

    // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–æ–≤
    applyFiltersBtn.addEventListener('click', applyFilters);
    resetFiltersBtn.addEventListener('click', resetFilters);

    // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —Ñ–∏–ª—å—Ç—Ä–æ–≤ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –∑–Ω–∞—á–µ–Ω–∏–π
    searchFilter.addEventListener('input', debounce(applyFilters, 300));

    // –§—É–Ω–∫—Ü–∏—è debounce –¥–ª—è –ø–æ–∏—Å–∫–∞
    function debounce(func, wait) {
      let timeout;
      return function executedFunction(...args) {
        const later = () => {
          clearTimeout(timeout);
          func(...args);
        };
        clearTimeout(timeout);
        timeout = setTimeout(later, wait);
      };
    }
  });
</script>
</body>
</html>
