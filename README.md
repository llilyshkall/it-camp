# IT-Camp Evaluation Service

–°–µ—Ä–≤–∏—Å –¥–ª—è –æ—Ü–µ–Ω–∫–∏ –ø—Ä–æ–µ–∫—Ç–æ–≤ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –∑–∞–º–µ—á–∞–Ω–∏–π –∏ —Ñ–∞–π–ª–æ–≤.

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–∏—Å–æ–≤
```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ–º –º–∏–≥—Ä–∞—Ü–∏–π
make docker-compose-up

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å
make status

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∑–¥–æ—Ä–æ–≤—å–µ —Å–µ—Ä–≤–∏—Å–∞
make health-check
```

### –û—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–µ—Ä–≤–∏—Å–æ–≤
```bash
make docker-compose-down
```

## üóÑÔ∏è –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö

### –ú–∏–≥—Ä–∞—Ü–∏–∏
```bash
# –ü—Ä–∏–º–µ–Ω–∏—Ç—å –≤—Å–µ –º–∏–≥—Ä–∞—Ü–∏–∏
make migrate-up

# –û—Ç–∫–∞—Ç–∏—Ç—å –≤—Å–µ –º–∏–≥—Ä–∞—Ü–∏–∏
make migrate-down

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å –º–∏–≥—Ä–∞—Ü–∏–π
make migrate-status

# –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é –º–∏–≥—Ä–∞—Ü–∏—é
make migrate-create name=add_new_field

# –°–±—Ä–æ—Å–∏—Ç—å –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö
make migrate-reset
```

### –ü–æ–¥—Ä–æ–±–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ –º–∏–≥—Ä–∞—Ü–∏—è–º
–°–º. [MIGRATION_GUIDE.md](MIGRATION_GUIDE.md)

## üìÅ –§–∞–π–ª–æ–≤–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ (MinIO)

–°–µ—Ä–≤–∏—Å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç MinIO –∫–∞–∫ S3-—Å–æ–≤–º–µ—Å—Ç–∏–º–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ —Ñ–∞–π–ª–æ–≤ –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏.

### –î–æ—Å—Ç—É–ø –∫ MinIO
- **API Endpoint**: http://localhost:9000
- **Web Console**: http://localhost:9001
- **–õ–æ–≥–∏–Ω**: minioadmin / minioadmin

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ MinIO
```bash
# –û—Ç–∫—Ä—ã—Ç—å –≤–µ–±-–∫–æ–Ω—Å–æ–ª—å MinIO
make minio-console

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å MinIO
make minio-status
```

### Bucket
- **–ò–º—è**: evaluation-files
- **–ü–æ–ª–∏—Ç–∏–∫–∞**: –ü—É–±–ª–∏—á–Ω—ã–π –¥–æ—Å—Ç—É–ø –Ω–∞ —á—Ç–µ–Ω–∏–µ
- **–°—Ç—Ä—É–∫—Ç—É—Ä–∞**: –§–∞–π–ª—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –ø–∞–ø–∫–∞—Ö –ø–æ –¥–∞—Ç–µ (YYYY-MM-DD/)

## üìö API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

–ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ API —Å–º. –≤ [API_EXAMPLES.md](API_EXAMPLES.md)

## üõ†Ô∏è –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –°–±–æ—Ä–∫–∞
```bash
make build
```

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
```bash
make test
```

### –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞
```bash
make dev
```

### –õ–æ–≥–∏
```bash
make logs
```

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
services/evaluation/
‚îú‚îÄ‚îÄ cmd/evaluation/          # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞
‚îú‚îÄ‚îÄ internal/                # –í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –ª–æ–≥–∏–∫–∞
‚îÇ   ‚îú‚îÄ‚îÄ app/                # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ config/             # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ handler/            # HTTP –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏
‚îÇ   ‚îú‚îÄ‚îÄ postgres/           # –†–∞–±–æ—Ç–∞ —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îú‚îÄ‚îÄ repository/         # –°–ª–æ–π –¥–æ—Å—Ç—É–ø–∞ –∫ –¥–∞–Ω–Ω—ã–º
‚îÇ   ‚îî‚îÄ‚îÄ storage/            # –§–∞–π–ª–æ–≤–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ (MinIO)
‚îú‚îÄ‚îÄ db/                     # –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îú‚îÄ‚îÄ migration/          # –ú–∏–≥—Ä–∞—Ü–∏–∏
‚îÇ   ‚îî‚îÄ‚îÄ query/              # SQL –∑–∞–ø—Ä–æ—Å—ã
‚îî‚îÄ‚îÄ Dockerfile              # Docker –æ–±—Ä–∞–∑
```

## üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–°–µ—Ä–≤–∏—Å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –∏–∑ —Ñ–∞–π–ª–∞ `.env`:

- `DB_PASSWORD` - –ø–∞—Ä–æ–ª—å –¥–ª—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
- `PORT` - –ø–æ—Ä—Ç —Å–µ—Ä–≤–∏—Å–∞ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 8080)
- `ENVIRONMENT` - –æ–∫—Ä—É–∂–µ–Ω–∏–µ (development/production)

### MinIO –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
- `MINIO_ENDPOINT` - –∞–¥—Ä–µ—Å MinIO —Å–µ—Ä–≤–µ—Ä–∞ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é localhost:9000)
- `MINIO_ACCESS_KEY` - –∫–ª—é—á –¥–æ—Å—Ç—É–ø–∞ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é minioadmin)
- `MINIO_SECRET_KEY` - —Å–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é minioadmin)
- `MINIO_BUCKET_NAME` - –∏–º—è bucket (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é evaluation-files)
- `MINIO_USE_SSL` - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ SSL (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é false)

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

- Health check: `http://localhost:8081/health`
- MinIO health: `http://localhost:9000/minio/health/live`

## üö® Troubleshooting

### –ü—Ä–æ–±–ª–µ–º—ã —Å –º–∏–≥—Ä–∞—Ü–∏—è–º–∏
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å
make migrate-status

# –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –∏—Å–ø—Ä–∞–≤–∏—Ç—å –≤–µ—Ä—Å–∏—é
make migrate-force version=1

# –ü–æ–ª–Ω—ã–π —Å–±—Ä–æ—Å
make migrate-reset
```

### –ü—Ä–æ–±–ª–µ–º—ã —Å Docker
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
make status

# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏
make logs

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–∏—Å—ã
make docker-compose-down && make docker-compose-up
```
